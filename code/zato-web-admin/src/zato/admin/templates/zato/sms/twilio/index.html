<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Flows</title>
    <link rel="stylesheet" type="text/css" href="/static/css/joint.min.css">
    <link rel="stylesheet" type="text/css" href="/static/css/pyscript/pyscript-core-2025.3.1.css">
    <link rel="stylesheet" type="text/css" href="/static/css/flows/style.css">
    <style>
    </style>

    <!-- Dependencies -->
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/jquery/jquery-3.7.1.js"></script>
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/joint/lodash.min.js"></script>
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/joint/backbone.min.js"></script>
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/joint/joint.min.js"></script>

    <!-- PyScript -->
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/brython-src/brython.min.js"></script>
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/brython-src/brython_stdlib.js"></script>

    <!-- Application JavaScript - Split into modular files -->
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/js/flows/shapes.js"></script>
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/js/flows/selection.js"></script>
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/js/flows/connections.js"></script>
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/js/flows/palette.js"></script>
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/js/flows/properties.js"></script>
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/js/flows/validation.js"></script>
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/js/flows/export.js"></script>
    <script nonce="{{ CSP_NONCE }}" type="text/javascript" src="/static/js/flows/main.js"></script>
</head>
<body>
    <div class="container">

        <div class="sidebar">
            <div class="palette-section">
                <div class="palette-header">Nodes</div>
                <div class="palette-item" data-type="start">Start</div>
                <div class="palette-item" data-type="stop">Stop</div>
                <div class="palette-item" data-type="service">Service</div>
                <div class="palette-item" data-type="parallel">Parallel</div>
                <div class="palette-item" data-type="forkjoin">Fork/Join</div>
            </div>

            <div class="palette-section">
                <div class="palette-header">Actions</div>
                <button id="clear-graph" style="width: 100%; padding: 8px; margin-top: 5px;">Clear Flow</button>
                <button id="save-graph" style="width: 100%; padding: 8px; margin-top: 5px;">Save Flow</button>
                <button id="load-graph" style="width: 100%; padding: 8px; margin-top: 5px;">Load Flow</button>
            </div>
        </div>

        <div class="main-content">
            <div class="toolbar">
                <button id="undo-button">Undo</button>
                <button id="redo-button">Redo</button>
                <button id="zoom-in">Zoom In</button>
                <button id="zoom-out">Zoom Out</button>
                <button id="zoom-to-fit">Fit to View</button>
                <button id="validate-button">Validate</button>
                <button id="export-json">Export JSON</button>
                <button id="export-png">Export PNG</button>
            </div>
            <div id="paper"></div>

            <div class="zoom-controls">
                <button id="pan-paper">Pan Mode</button>
            </div>
        </div>

        <div class="properties-panel">
            <div class="properties-header">Properties</div>
            <div id="properties-content">
                <div class="empty-properties">Select an element to view properties</div>
            </div>
        </div>
    </div>
</body>
</html>
